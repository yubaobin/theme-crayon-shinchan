<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{gateway_fragments/layout :: layout(title = |登录 - ${site.title}|, head = ~{::head}, body = ~{::body})}"
  data-fp="55018a22"
  data-theme-build="1770439357"
>
  <head>
    <style>
      /* 防止闪白 - 在 CSS 加载前设置背景色 */
      html {
        background-color: #111111;
      }

      html[data-theme='light'] {
        background-color: #ffffff;
      }
    </style>
    <link rel="stylesheet" th:href="@{/assets/css/login.css}" />
    <script th:src="@{/assets/js/login.js}" defer></script>
    <script th:inline="javascript">
      ;(function () {
        const defaultTheme = /*[[${theme.config.basic.defaultTheme ?: 'dark'}]]*/ 'dark'
        const scheme = localStorage.getItem('color-scheme') || defaultTheme
        const normalizedScheme = scheme === 'auto' || !scheme ? 'dark' : scheme
        document.documentElement.setAttribute('data-theme', normalizedScheme)
      })()
    </script>
  </head>
  <th:block th:fragment="body">
    <div class="sepo-gateway-background">
      <div
        th:if="${theme.config.home == null || theme.config.home.showHeroBackground == null || theme.config.home.showHeroBackground}"
        class="sepo-gateway-wallpaper"
      >
        <th:block
          th:with="bgUrl = ${theme.config.home != null && theme.config.home.heroBackground != null && !#strings.isEmpty(theme.config.home.heroBackground) ? theme.config.home.heroBackground : '/themes/theme-crayon-shinchan/assets/public/labixiaoxi.webp'}"
        >
          <video
            th:if="${#strings.endsWith(#strings.toLowerCase(bgUrl), '.mp4') || #strings.endsWith(#strings.toLowerCase(bgUrl), '.webm')}"
            th:src="${bgUrl}"
            class="sepo-gateway-wallpaper-media"
            autoplay
            loop
            muted
            playsinline
            disablepictureinpicture
          ></video>
          <div
            th:unless="${#strings.endsWith(#strings.toLowerCase(bgUrl), '.mp4') || #strings.endsWith(#strings.toLowerCase(bgUrl), '.webm')}"
            class="sepo-gateway-wallpaper-media"
            th:style="'background-image: url(' + ${bgUrl} + ');'"
          ></div>
        </th:block>
      </div>
    </div>
    <div
      class="theme-decor"
      th:if="${theme.config.home == null || theme.config.home.showThemeDecor == null || theme.config.home.showThemeDecor}"
    >
      <img
        th:src="${theme.config.home != null && theme.config.home.customDecorLight != null && !#strings.isEmpty(theme.config.home.customDecorLight) ? theme.config.home.customDecorLight : '/themes/theme-crayon-shinchan/assets/public/light.webp'}"
        alt=""
        class="theme-decor-light"
      />
      <img
        th:src="${theme.config.home != null && theme.config.home.customDecorDark != null && !#strings.isEmpty(theme.config.home.customDecorDark) ? theme.config.home.customDecorDark : '/themes/theme-crayon-shinchan/assets/public/dark.webp'}"
        alt=""
        class="theme-decor-dark"
      />
    </div>
    <a href="/" class="sepo-gateway-back-button">
      <span>&lt;</span>
      <span>返回网站</span>
    </a>
    <div class="gateway-wrapper">
      <div class="sepo-gateway-content-container">
        <div class="sepo-gateway-main-card">
          <div class="sepo-gateway-header-section">
            <div class="sepo-gateway-brand-logo">
              <img
                th:src="${theme.config.hero.avatar ?: (site.favicon ?: '/themes/theme-crayon-shinchan/assets/public/ics6.webp')}"
                th:alt="${site.title}"
                alt="Logo"
              />
            </div>
            <div class="sepo-gateway-brand-text">
              <h1 class="sepo-gateway-site-title" th:text="${site.title}">ybb</h1>
              <p class="sepo-gateway-site-subtitle" th:text="${site.subtitle}">一个优雅的博客</p>
            </div>
          </div>
          <div th:replace="~{gateway_fragments/login::form}"></div>
          <div class="sepo-gateway-footer-section">
            <p>
              Powered by
              <a href="https://halo.run" target="_blank" rel="noopener">Halo</a>
              <span th:if="${theme.config.basic.author}">
                · Theme by
                <span th:text="${theme.config.basic.author}"></span>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </th:block>
</html>
