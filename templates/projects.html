<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(title = ${singlePage.spec.title}, content = ~{::content}, head = ~{::head})}"
  data-fp="55018a22"
  data-theme-build="1770439357"
>
  <th:block th:fragment="head">
    <link rel="stylesheet" th:href="@{/assets/css/projects.css}" />
    <script th:src="@{/assets/js/projects.js}" defer></script>
  </th:block>
  <th:block th:fragment="content">
    <main class="main">
      <div class="container">
        <section class="projects-page">
          <div class="projects-header" data-aos="fade-up">
            <h1 class="projects-title" th:text="${singlePage.spec.title}">我的项目</h1>
            <p class="projects-subtitle">开源项目与作品集</p>
            <div class="projects-stats">
              <div class="projects-stat">
                <span class="projects-stat-num" id="totalProjects">0</span>
                <span class="projects-stat-label">个项目</span>
              </div>
              <div class="projects-stat">
                <span class="projects-stat-num" id="totalStars">0</span>
                <span class="projects-stat-label">Stars</span>
              </div>
              <div class="projects-stat">
                <span class="projects-stat-num" id="totalForks">0</span>
                <span class="projects-stat-label">Forks</span>
              </div>
            </div>
          </div>
          <div class="projects-grid" id="projectsGrid" data-aos="fade-up" data-aos-delay="100">
            <div class="projects-loading" id="projectsLoading">
              <div class="loading-spinner"></div>
              <p>正在加载项目信息...</p>
            </div>
          </div>
          <div class="projects-empty" id="projectsEmpty" style="display: none">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
              />
            </svg>
            <p>暂无项目</p>
            <span>请在主题设置中添加 GitHub 项目链接</span>
          </div>
        </section>
      </div>
    </main>
    <script th:inline="javascript">
      const GITHUB_PROJECTS_RAW = /*[[${theme.config.projects?.githubRepos}]]*/ []
      const CUSTOM_PROJECTS_RAW = /*[[${theme.config.projects?.customProjects}]]*/ []

      window.GITHUB_PROJECTS = Array.isArray(GITHUB_PROJECTS_RAW)
        ? GITHUB_PROJECTS_RAW.map((item) => {
            if (typeof item === 'string') return item
            if (item && item.realNode && item.realNode.url) return item.realNode.url
            if (item && item.url) return item.url
            return null
          }).filter((url) => url !== null && url !== '')
        : []

      window.CUSTOM_PROJECTS = Array.isArray(CUSTOM_PROJECTS_RAW)
        ? CUSTOM_PROJECTS_RAW.map((item) => {
            if (item && item.realNode) return item.realNode
            return item
          }).filter((item) => item && item.name && item.url)
        : []
    </script>
  </th:block>
</html>
