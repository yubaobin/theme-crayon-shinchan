<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{gateway_fragments/layout :: layout(title = |重置密码 - ${site.title}|, head = ~{::head}, body = ~{::body})}"
>
  <head>
    <link rel="stylesheet" th:href="@{/assets/css/login.css}" />
    <script th:inline="javascript">
      ;(function () {
        const defaultTheme = 'dark'
        const scheme = localStorage.getItem('color-scheme') || defaultTheme
        const normalizedScheme = scheme === 'auto' || !scheme ? 'dark' : scheme
        document.documentElement.setAttribute('data-theme', normalizedScheme)
      })()
    </script>
  </head>
  <th:block th:fragment="body">
    <div class="sepo-gateway-background">
      <div
        th:if="${theme.config.home == null || theme.config.home.showHeroBackground == null || theme.config.home.showHeroBackground}"
        class="sepo-gateway-wallpaper"
      >
        <th:block
          th:with="bgUrl = ${theme.config.home != null && theme.config.home.heroBackground != null && !#strings.isEmpty(theme.config.home.heroBackground) ? theme.config.home.heroBackground : '/themes/theme-crayon-shinchan/assets/public/labixiaoxi.webp'}"
        >
          <video
            th:if="${#strings.endsWith(#strings.toLowerCase(bgUrl), '.mp4') || #strings.endsWith(#strings.toLowerCase(bgUrl), '.webm')}"
            th:src="${bgUrl}"
            class="sepo-gateway-wallpaper-media"
            autoplay
            loop
            muted
            playsinline
            disablepictureinpicture
          ></video>
          <div
            th:unless="${#strings.endsWith(#strings.toLowerCase(bgUrl), '.mp4') || #strings.endsWith(#strings.toLowerCase(bgUrl), '.webm')}"
            class="sepo-gateway-wallpaper-media"
            th:style="'background-image: url(' + ${bgUrl} + ');'"
          ></div>
        </th:block>
      </div>
    </div>
    <a href="/" class="sepo-gateway-back-button">
      <span>&lt;</span>
      <span>返回网站</span>
    </a>
    <div class="gateway-wrapper">
      <div class="sepo-gateway-content-container">
        <div class="sepo-gateway-main-card">
          <div class="sepo-gateway-header-section">
            <div class="sepo-gateway-brand-logo">
              <img
                th:src="${theme.config.hero.avatar ?: (site.favicon ?: '/themes/theme-crayon-shinchan/assets/public/ics6.webp')}"
                th:alt="${site.title}"
                alt="Logo"
              />
            </div>
            <div class="sepo-gateway-brand-text">
              <h1 class="sepo-gateway-site-title" th:text="${site.title}">Serenity</h1>
              <p class="sepo-gateway-site-subtitle" th:text="${site.subtitle}">一个优雅的博客</p>
            </div>
          </div>
          <div class="sepo-success-content">
            <svg class="sepo-success-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <h2>重置链接已发送</h2>
            <p>请检查您的邮箱并按照说明操作</p>
            <a href="/login" class="sepo-return-button">返回登录</a>
          </div>
          <div class="sepo-gateway-footer-section">
            <p>
              Powered by
              <a href="https://halo.run" target="_blank" rel="noopener">Halo</a>
              <span th:if="${theme.config.basic.author}">
                · Theme by
                <span th:text="${theme.config.basic.author}"></span>
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </th:block>
</html>
