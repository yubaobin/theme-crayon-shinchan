<!doctype html>
<html xmlns:th="https://www.thymeleaf.org" th:fragment="html(title, content, head)">
  <head>
    <script>
      ;(function () {
        if (
          window.location.pathname === '/' ||
          window.location.pathname === '/index' ||
          window.location.pathname === '/index.html'
        ) {
          if (!sessionStorage.getItem('serenity-welcomed')) {
            document.write(
              '<style id="welcome-hide-style">.header,.footer,.back-to-top,.page-gradient,.hero-background{opacity:0!important;visibility:hidden!important}body{overflow:hidden!important}<\/style>'
            )
          }
        }
      })()
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Halo" />
    <title
      th:text="${title != null ? title + ' - ' + (theme.config.basic.title ?: site.title) : (theme.config.basic.title ?: site.title)}"
    >
      ybb-Grace
    </title>
    <meta name="description" th:content="${theme.config.basic.description ?: site.subtitle}" />
    <meta
      th:if="${theme.config.seo != null && theme.config.seo.keywords != null && !#strings.isEmpty(theme.config.seo.keywords)}"
      name="keywords"
      th:content="${theme.config.seo.keywords}"
    />
    <meta
      th:if="${theme.config.seo != null && theme.config.seo.baiduSiteVerification != null && !#strings.isEmpty(theme.config.seo.baiduSiteVerification)}"
      name="baidu-site-verification"
      th:content="${theme.config.seo.baiduSiteVerification}"
    />
    <meta
      th:if="${theme.config.seo != null && theme.config.seo.googleSiteVerification != null && !#strings.isEmpty(theme.config.seo.googleSiteVerification)}"
      name="google-site-verification"
      th:content="${theme.config.seo.googleSiteVerification}"
    />
    <link
      rel="icon"
      th:href="${theme.config.basic.favicon != null && !#strings.isEmpty(theme.config.basic.favicon) ? theme.config.basic.favicon : (site.favicon != null && !#strings.isEmpty(site.favicon) ? site.favicon : '/themes/theme-crayon-shinchan/assets/public/ics6.webp')}"
    />
    <link rel="stylesheet" th:href="@{/assets/fonts/qweather-icons.css}" />
    <link rel="preload" th:href="@{/assets/css/base.css}" as="style" />
    <link rel="stylesheet" th:href="@{/assets/dist/main.css?v={version}(version=${theme.spec.version})}" />
    <link rel="stylesheet" th:href="@{/assets/css/base.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/aos.css}" />
    <script th:src="@{/assets/dist/main.iife.js?v={version}(version=${theme.spec.version})}"></script>
    <th:block th:replace="${head}" />
    <script th:inline="javascript">
      ;(function () {
        const defaultTheme = 'dark'
        const scheme = localStorage.getItem('color-scheme') || defaultTheme
        document.documentElement.setAttribute('data-theme', scheme)
      })()
    </script>
    <th:block th:utext="${theme.config.basic.customHead}" />
    <script
      th:if="${theme.config.seo != null && (theme.config.seo.enableJsonLd == null || theme.config.seo.enableJsonLd)}"
      type="application/ld+json"
      th:inline="javascript"
    >
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "YBB's Blog",
        "url": "",
        "description": "",
        "author": { "@type": "Person", "name": "ybb" }
      }
    </script>
  </head>

  <body th:attr="data-theme=${theme.config.basic.defaultTheme ?: 'dark'}">
    <div class="page-transition" id="page-transition">
      <div class="page-transition-spinner"><span></span></div>
      <div class="page-transition-text">正在跳转...</div>
    </div>
    <div class="page-gradient"></div>
    <th:block th:replace="~{modules/header}"></th:block>
    <th:block th:replace="~{modules/search-modal}"></th:block>
    <main class="main">
      <th:block th:replace="${content}" />
    </main>
    <th:block th:replace="~{modules/footer}"></th:block>
    <button class="back-to-top" id="back-to-top" aria-label="返回顶部">
      <svg
        class="back-to-top-icon"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M18 15l-6-6-6 6" />
      </svg>
      <span class="back-to-top-text">TOP</span>
    </button>
    <script th:src="@{/assets/js/main.js}" defer></script>
    <script th:src="@{/assets/js/search.js}" defer></script>
    <script th:src="@{/assets/js/lib/aos.js}" defer></script>
    <th:block th:utext="${theme.config.basic.customScript}" />
  </body>
</html>
