<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(title = ${singlePage != null ? singlePage.spec.title : '图库集'}, content = ~{::content}, head = ~{::head})}"
  data-fp="55018a22"
  data-theme-build="1770439357"
>
  <th:block th:fragment="head">
    <link rel="stylesheet" th:href="@{/assets/css/photos.css}" />
  </th:block>
  <th:block th:fragment="content">
    <main class="main">
      <div class="container">
        <section class="photos-page" th:with="photoGroups = ${photoFinder != null ? photoFinder.groupBy() : null}">
          <div class="photos-header" data-aos="fade-up">
            <h1 class="photos-title" th:text="${singlePage != null ? singlePage.spec.title : '图库集'}">图库集</h1>
            <p class="photos-subtitle">用镜头记录生活的美好瞬间</p>
          </div>
          <div th:if="${photoFinder == null}" class="photos-empty" data-aos="fade-up">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
              <circle cx="8.5" cy="8.5" r="1.5" />
              <polyline points="21 15 16 10 5 21" />
            </svg>
            <p>图库功能需要安装「图库」插件</p>
          </div>
          <div th:if="${photoGroups != null && !photoGroups.isEmpty()}" class="photos-filter" data-aos="fade-up">
            <button class="filter-btn active" data-group="all">全部</button>
            <th:block th:each="group : ${photoGroups}">
              <button class="filter-btn" th:data-group="${group.metadata.name}" th:text="${group.spec.displayName}">
                分组
              </button>
            </th:block>
          </div>
          <th:block th:if="${photoGroups != null && !photoGroups.isEmpty()}">
            <div class="photos-masonry" id="photos-masonry">
              <th:block th:each="group : ${photoGroups}">
                <th:block th:each="photo : ${group.photos}">
                  <div class="photo-item" th:data-group="${group.metadata.name}" data-aos="fade-up">
                    <div class="photo-wrapper">
                      <img
                        th:src="${photo.spec.url}"
                        th:alt="${photo.spec.displayName}"
                        loading="lazy"
                        onclick="openLightbox(this)"
                      />
                      <span
                        class="photo-time"
                        th:if="${photo.metadata.creationTimestamp}"
                        th:text="${#temporals.format(photo.metadata.creationTimestamp, 'yyyy-MM-dd')}"
                      ></span>
                      <div class="photo-overlay">
                        <span class="photo-name" th:if="${photo.spec.displayName}" th:text="${photo.spec.displayName}">
                          图片名称
                        </span>
                        <span class="photo-group" th:text="${group.spec.displayName}">分组</span>
                      </div>
                    </div>
                  </div>
                </th:block>
              </th:block>
            </div>
          </th:block>
          <th:block th:if="${photoGroups == null || photoGroups.isEmpty()}">
            <div class="photos-masonry" id="photos-masonry">
              <div class="photo-item" data-group="demo">
                <div class="photo-wrapper">
                  <img src="https://picsum.photos/seed/p1/400/600" alt="示例图片" />
                  <div class="photo-overlay">
                    <span class="photo-name">风景照片</span>
                    <span class="photo-group">风景</span>
                  </div>
                </div>
              </div>
              <div class="photo-item" data-group="demo">
                <div class="photo-wrapper">
                  <img src="https://picsum.photos/seed/p2/400/300" alt="示例图片" />
                  <div class="photo-overlay">
                    <span class="photo-name">城市夜景</span>
                    <span class="photo-group">城市</span>
                  </div>
                </div>
              </div>
            </div>
          </th:block>
        </section>
      </div>
    </main>
    <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
      <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
      <img class="lightbox-img" id="lightbox-img" src="" alt="" />
    </div>
    <script th:src="@{/assets/js/photos.js}"></script>
  </th:block>
</html>
